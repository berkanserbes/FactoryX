@using Microsoft.AspNetCore.Identity
@{
    var appTitle = "FactoryX MES";
    var isAuthenticated = User.Identity?.IsAuthenticated ?? false;
    var username = User.Identity?.Name;
    var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
    var currentAction = ViewContext.RouteData.Values["action"]?.ToString();
}
<nav class="navbar navbar-expand-lg bg-body-tertiary border-bottom shadow-sm">
    <div class="container-fluid">
        <a class="navbar-brand fw-bold" asp-area="" asp-controller="Home" asp-action="Index">
            <i class="bi bi-gear-wide-connected me-1"></i> @appTitle
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar"
            aria-controls="mainNavbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="mainNavbar">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                @if (isAuthenticated)
                {
                    <li class="nav-item">
                        <a class="nav-link @(currentController == "Home" && currentAction == "Dashboard" ? "active fw-bold" : "")"
                            asp-controller="Home" asp-action="Dashboard">
                            <i class="bi bi-speedometer2"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link @(currentController == "Machines" ? "active fw-bold" : "")"
                            asp-controller="Machines" asp-action="Index">
                            <i class="bi bi-cpu"></i> Makine
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link @(currentController == "Products" ? "active fw-bold" : "")"
                            asp-controller="Products" asp-action="Index">
                            <i class="bi bi-box-seam"></i> Ürün
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link @(currentController == "Operator" ? "active fw-bold" : "")"
                            asp-controller="Operator" asp-action="Index">
                            <i class="bi bi-person-badge"></i> Operatör
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link @(currentController == "WorkOrder" ? "active fw-bold" : "")"
                            asp-controller="WorkOrder" asp-action="Index">
                            <i class="bi bi-list-task"></i> İş Emri
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link @(currentController == "ProductionRecord" ? "active fw-bold" : "")"
                            asp-controller="ProductionRecord" asp-action="Index">
                            <i class="bi bi-clipboard-data"></i> Üretim Kaydı
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link @(currentController == "Shift" ? "active fw-bold" : "")" asp-controller="Shift"
                            asp-action="Index">
                            <i class="bi bi-clock-history"></i> Vardiya
                        </a>
                    </li>
                    <li class="nav-item d-flex align-items-center me-2">
                        <a class="nav-link" asp-controller="Account" asp-action="Profile"><i
                                class="bi bi-person-circle"></i> @username</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Account" asp-action="Logout"><i
                                class="bi bi-box-arrow-right"></i> Logout</a>
                    </li>
                }
                else
                {
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Account" asp-action="Login"><i
                                class="bi bi-box-arrow-in-right"></i> Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Account" asp-action="Register"><i class="bi bi-person-plus"></i>
                            Register</a>
                    </li>
                }
                <li class="nav-item d-flex align-items-center ms-2">
                    <span id="theme-toggle-placeholder"></span>
                </li>
            </ul>
        </div>
    </div>
</nav>